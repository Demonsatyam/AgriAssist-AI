{"openapi":"3.1.0","info":{"title":"AgriAssist API","version":"0.1.0"},"paths":{"/api/v1/query":{"post":{"tags":["query"],"summary":"Query Endpoint","operationId":"query_endpoint_api_v1_query_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/QueryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/image/pest":{"post":{"tags":["pest"],"summary":"Classify Pest","operationId":"classify_pest_api_v1_image_pest_post","requestBody":{"content":{"multipart/form-data":{"schema":{"$ref":"#/components/schemas/Body_classify_pest_api_v1_image_pest_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PestResult"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/recommendation/irrigation":{"get":{"tags":["irrigation"],"summary":"Irrigation","operationId":"irrigation_api_v1_recommendation_irrigation_get","parameters":[{"name":"field_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Field Id"}},{"name":"crop","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Crop"}},{"name":"stage","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Stage"}},{"name":"lat","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lat"}},{"name":"lon","in":"query","required":false,"schema":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Lon"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/IrrigationAdvice"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/market/price":{"get":{"tags":["market"],"summary":"Market Price","operationId":"market_price_api_v1_market_price_get","parameters":[{"name":"commodity","in":"query","required":true,"schema":{"type":"string","title":"Commodity"}},{"name":"market_id","in":"query","required":true,"schema":{"type":"string","title":"Market Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/MarketTrend"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/admin/health":{"get":{"tags":["admin"],"summary":"Health","operationId":"health_api_v1_admin_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}},"/api/v1/admin/metrics":{"get":{"tags":["admin"],"summary":"Metrics","operationId":"metrics_api_v1_admin_metrics_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"Body_classify_pest_api_v1_image_pest_post":{"properties":{"image":{"type":"string","format":"binary","title":"Image"}},"type":"object","required":["image"],"title":"Body_classify_pest_api_v1_image_pest_post"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"IrrigationAdvice":{"properties":{"action":{"type":"string","enum":["Irrigate","Delay"],"title":"Action"},"next_window":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Next Window"},"reasoning":{"type":"string","title":"Reasoning"},"sources":{"items":{"$ref":"#/components/schemas/Source"},"type":"array","title":"Sources","default":[]},"confidence":{"type":"integer","title":"Confidence"}},"type":"object","required":["action","reasoning","confidence"],"title":"IrrigationAdvice"},"MarketTrend":{"properties":{"latest_price":{"type":"number","title":"Latest Price"},"trend":{"items":{"$ref":"#/components/schemas/PricePoint"},"type":"array","title":"Trend"},"suggestion":{"type":"string","enum":["Sell","Hold"],"title":"Suggestion"},"sources":{"items":{"$ref":"#/components/schemas/Source"},"type":"array","title":"Sources","default":[]},"confidence":{"type":"integer","title":"Confidence"}},"type":"object","required":["latest_price","trend","suggestion","confidence"],"title":"MarketTrend"},"PestResult":{"properties":{"pest_name":{"type":"string","title":"Pest Name"},"severity":{"type":"string","title":"Severity"},"treatment_steps":{"items":{"type":"string"},"type":"array","title":"Treatment Steps"},"sources":{"items":{"$ref":"#/components/schemas/Source"},"type":"array","title":"Sources","default":[]},"confidence":{"type":"integer","title":"Confidence"}},"type":"object","required":["pest_name","severity","treatment_steps","confidence"],"title":"PestResult"},"PricePoint":{"properties":{"date":{"type":"string","title":"Date"},"price":{"type":"number","title":"Price"}},"type":"object","required":["date","price"],"title":"PricePoint"},"QueryRequest":{"properties":{"text":{"type":"string","title":"Text"},"locale":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Locale","default":"en-IN"},"farm_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Farm Id"}},"type":"object","required":["text"],"title":"QueryRequest"},"QueryResponse":{"properties":{"answer":{"type":"string","title":"Answer"},"reasoning":{"type":"string","title":"Reasoning"},"sources":{"items":{"$ref":"#/components/schemas/Source"},"type":"array","title":"Sources","default":[]},"confidence":{"type":"integer","title":"Confidence"}},"type":"object","required":["answer","reasoning","confidence"],"title":"QueryResponse"},"Source":{"properties":{"title":{"type":"string","title":"Title"},"excerpt":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Excerpt"},"url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Url"}},"type":"object","required":["title"],"title":"Source"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}}}